# Meditech to FHIR R4 Encounter Mapping

source_system: meditech
source_table: ADM.VISIT
target_resource: Encounter

source_schema:
  database: MEDITECH
  table: ADM.VISIT

field_mappings:
  - source: VISIT_ID
    target: id
    transform: to_string

  - source: VISIT_STATUS
    target: status
    transform: meditech_status_to_fhir

  - source: PATIENT_TYPE
    target: class.code
    transform: meditech_patient_type_to_class

  - source: URN
    target: subject.reference
    transform: to_patient_reference

  - source: ADMIT_DATE_TIME
    target: period.start
    transform: datetime_to_fhir_datetime

  - source: DISCHARGE_DATE_TIME
    target: period.end
    transform: datetime_to_fhir_datetime
    skip_if_null: true

  - source: CHIEF_COMPLAINT
    target: reasonCode[0].text
    transform: null
    skip_if_null: true

  - source: ATTENDING_PROVIDER_ID
    target: participant[0].individual.reference
    transform: to_practitioner_reference
    skip_if_null: true

  - source: NURSING_UNIT
    target: location[0].location.reference
    transform: to_location_reference
    skip_if_null: true

  - source: DISCHARGE_DISPOSITION
    target: hospitalization.dischargeDisposition.text
    transform: null
    skip_if_null: true
